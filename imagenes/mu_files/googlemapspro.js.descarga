/**
 * @package     ZL Elements
 * @version     3.3.0
 * @author      ZOOlanders - http://zoolanders.com
 * @license     GNU General Public License v2 or later
 */

!function(t){var o=function(){};t.extend(o.prototype,{name:"GoogleMapsPro",options:{lat:53.553407,lng:9.992196,marker:!0,popup:!1,text:"",zoom:13,mapCtrl:2,zoomWhl:!0,mapType:0,typeCtrl:!0,overviewCtrl:!0,directions:!0,directionsDestUpdate:!1,directionsTravelMode:0,locale:"en",mainIcon:"red-dot",otherIcon:"blue-dot",http:"http",iconUrl:"://maps.google.com/mapfiles/ms/micons/",msgFromAddress:"From address: ",msgGetDirections:"Get directions",msgEmpty:"Please fill in your address.",msgNotFound:"Sorry, address not found!",msgAddressNotFound:", not found!",msgAvoidTolls:"Avoid tolls",msgAvoidHighways:"Avoid highways"},initialize:function(o,e){this.options=t.extend({},this.options,e),this.container=o,this.setupMap(),this.options.directions&&this.setupDirections()},setupMap:function(){this.map=new google.maps.Map(this.container.get(0),{mapTypeId:google.maps.MapTypeId.ROADMAP}),this.map.setOptions({navigationControl:1==this.options.mapCtrl||2==this.options.mapCtrl?!0:!1}),this.map.setOptions({navigationControlOptions:{style:1==this.options.mapCtrl?google.maps.NavigationControlStyle.SMALL:google.maps.NavigationControlStyle.DEFAULT}}),this.map.setOptions({scrollwheel:this.options.zoomWhl?!0:!1}),1==this.options.mapType&&this.map.setOptions({mapTypeId:google.maps.MapTypeId.SATELLITE}),2==this.options.mapType&&this.map.setOptions({mapTypeId:google.maps.MapTypeId.HYBRID}),3==this.options.mapType&&this.map.setOptions({mapTypeId:google.maps.MapTypeId.TERRAIN}),this.map.setOptions({mapTypeControl:this.options.typeCtrl?!0:!1}),this.infowindow=new google.maps.InfoWindow,this.options.marker?this.addMarkerLatLng(this.options.lat,this.options.lng,this.options.text,!0):this.centerMap(this.options.lat,this.options.lng)},createMarker:function(t,o,e){var i=this,s=this.map,n=this.infowindow,a=new google.maps.MarkerImage(this.options.http+this.options.iconUrl+e+".png",new google.maps.Size(32,32),new google.maps.Point(0,0),new google.maps.Point(16,32)),e=e.match("pushpin")?this.options.http+this.options.iconUrl+"pushpin_shadow.png":this.options.http+this.options.iconUrl+"msmarker.shadow.png",e=new google.maps.MarkerImage(e,new google.maps.Size(56,32),new google.maps.Point(0,0),new google.maps.Point(16,32)),p=new google.maps.Marker({position:t,icon:a,shadow:e,map:this.map});return(o||this.options.directionsDestUpdate)&&google.maps.event.addListener(p,"click",function(){o&&(n.setContent(o),n.open(s,p)),i.options.directionsDestUpdate&&(i.options.lat=p.getPosition().lat(),i.options.lng=p.getPosition().lng())}),p},centerMap:function(t,o){this.map.setCenter(new google.maps.LatLng(t,o)),this.map.setZoom(this.options.zoom)},addMarkerLatLng:function(t,o,e,i){var s=this.options.otherIcon;i&&(s=this.options.mainIcon),t=new google.maps.LatLng(t,o),s=this.createMarker(t,e,s),i&&(this.map.setCenter(t),this.map.setZoom(this.options.zoom)),i&&e&&this.options.popup&&(this.infowindow.setContent(e),this.infowindow.open(this.map,s))},setupDirections:function(){var o=this;this.directionsService=new google.maps.DirectionsService,this.directionsDisplay=new google.maps.DirectionsRenderer,this.directionsDisplay.setMap(this.map),this.directionsDisplay.setPanel(t("<div>").addClass("directions").css("position","relative").insertAfter(this.container).get(0));var e=t("<p>").append('<label for="from-address">'+this.options.msgFromAddress+"</label>").append('<input type="text" name="address" style="margin:0 5px;" />').append('<button type="submit">'+this.options.msgGetDirections+"</button>"),i="";2==this.options.tolls&&(i='checked="checked"');var s=t('<span class="avoid-tolls">').append('<label for="avoid-tolls">'+this.options.msgAvoidTolls+"</label>").append('<input id="avoid-tolls" type="checkbox" name="tolls" '+i+' style="margin:0 5px;" />');(1==this.options.tolls||2==this.options.tolls)&&e.append(s);var n="";2==this.options.highways&&(n='checked="checked"');var a=t('<span class="avoid-highways">').append('<label for="avoid-highways">'+this.options.msgAvoidHighways+"</label>").append('<input id="avoid-highways" type="checkbox" name="highways" '+n+' style="margin:0 5px;" />');(1==this.options.highways||2==this.options.highways)&&e.append(a),t('<form method="get" action="#"></form>').append(e).insertAfter(this.container).bind("submit",function(e){e.preventDefault(),e.stopPropagation(),o.setDirections(t(this))})},setDirections:function(t){var o=this,e=!1;e=t.find('input[name="tolls"]').is(":checked")?!0:!1;var i=!1;i=t.find('input[name="highways"]').is(":checked")?!0:!1,this.container.parent().find("div.alert").remove(),t=t.find('input[name="address"]').val(),""===t?this.showAlert(this.options.msgEmpty):this.directionsService.route({origin:t,destination:new google.maps.LatLng(this.options.lat,this.options.lng),avoidTolls:e,avoidHighways:i,unitSystem:this.options.unitSystem,travelMode:google.maps.DirectionsTravelMode.DRIVING,region:this.options.locale},function(t,e){e==google.maps.DirectionsStatus.OK?o.directionsDisplay.setDirections(t):o.showAlert(o.options.msgNotFound)})},showAlert:function(o){t("<div>").addClass("alert").append(t("<strong>").text(o)).insertAfter(this.container)}}),t.fn[o.prototype.name]=function(){var e=arguments,i=e[0]?e[0]:null;return this.each(function(){var s=t(this);if(o.prototype[i]&&s.data(o.prototype.name)&&"initialize"!=i)s.data(o.prototype.name)[i].apply(s.data(o.prototype.name),Array.prototype.slice.call(e,1));else if(!i||t.isPlainObject(i)){var n=new o;o.prototype.initialize&&n.initialize.apply(n,t.merge([s],e)),s.data(o.prototype.name,n)}else t.error("Method "+i+" does not exist on jQuery."+o.name)})}}(jQuery),function(t){var o=function(){};t.extend(o.prototype,{name:"GoogleMapsProSelector",initialize:function(o,e){this.options=t.extend({zldialog:null,returnpath:null,decimal_coordinates:null,zoom_level:13,default_center:"41.38696607915501,2.1699338571472326",txtSearch:"Search",txtSave:"Save",txtRestart:"Restart",mapType:0},e);var i=this;i.options.zldialog.loaded(),o.append('<div id="map_canvas" />');var s=i.options.default_center;i.options.returnpath.val()&&(s=i.options.returnpath.val()),s=s.split(","),0==i.options.mapType?MapType=google.maps.MapTypeId.ROADMAP:1==i.options.mapType?MapType=google.maps.MapTypeId.SATELLITE:2==i.options.mapType?MapType=google.maps.MapTypeId.HYBRID:3==i.options.mapType&&(MapType=google.maps.MapTypeId.TERRAIN),i.options.defaultoptions={zoom:i.options.zoom_level,center:new google.maps.LatLng(s[0],s[1]),mapTypeId:MapType,disableDefaultUI:!0,zoomControl:!0},i.options.returnpath.val()&&(i.options.defaultoptions.zoom=16),i.options.map=new google.maps.Map(o.find("#map_canvas").get(0),i.options.defaultoptions),i.options.coordinates=new google.maps.LatLng,i.options.geocoder=new google.maps.Geocoder,i.options.marker=new google.maps.Marker({draggable:!0,visible:!1}),google.maps.event.addListener(i.options.marker,"dragend",function(){i.setMarker(i.options.marker.getPosition())}),google.maps.event.addListener(i.options.map,"click",function(t){i.setMarker(t.latLng)}),i.initControls(o),i.options.decimal_coordinates()&&/^([-]?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)),\s?([-]?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+))$/.test(i.options.decimal_coordinates())?(decimal_coordinates=i.options.decimal_coordinates().split(","),i.setMarker(new google.maps.LatLng(decimal_coordinates[0],decimal_coordinates[1]))):i.options.returnpath.val()&&i.findLocation(i.options.returnpath.val())},initControls:function(o){var e=this,i=t('<div class="controls" />').append(t('<form name="select"><input type="text" class="address" /><input type="submit" value="'+e.options.txtSearch+'" /></form>').submit(function(){return e.findLocation(i.find("input.address").val()),!1}),t("<button>"+e.options.txtRestart+"</button>").click(function(){e.reset()}),t("<button>"+e.options.txtSave+"</button>").click(function(){e.save()}));o.append(t('<div class="controls-wrapper" />').append(i))},reset:function(){var t=this;t.options.returnpath.val()?t.findLocation(t.options.returnpath.val()):(t.options.marker.visible&&(t.options.marker.setMap(null),t.options.marker.visible=!1),t.options.map.setOptions(t.options.defaultoptions))},setMarker:function(t){this.options.coordinates=t,this.options.map.setZoom(16),this.options.map.setCenter(this.options.coordinates),this.options.marker.setPosition(this.options.coordinates),this.options.marker.setMap(this.options.map),this.options.marker.visible=!0},findLocation:function(t){var o=this;o.options.geocoder.geocode({address:t},function(t,e){e==google.maps.GeocoderStatus.OK?o.setMarker(t[0].geometry.location):(alert(e==google.maps.GeocoderStatus.ZERO_RESULTS?o.options.msgEmpty:"Geocode was not successful for the following reason: "+e),o.reset())})},save:function(){var t=this;t.options.marker.visible&&t.options.returnpath.val(t.options.coordinates.lat()+","+t.options.coordinates.lng()),t.options.returnpath.change(),t.options.zldialog.close()}}),t.fn[o.prototype.name]=function(){var e=arguments,i=e[0]?e[0]:null;return this.each(function(){var s=t(this);if(o.prototype[i]&&s.data(o.prototype.name)&&"initialize"!=i)s.data(o.prototype.name)[i].apply(s.data(o.prototype.name),Array.prototype.slice.call(e,1));else if(!i||t.isPlainObject(i)){var n=new o;o.prototype.initialize&&n.initialize.apply(n,t.merge([s],e)),s.data(o.prototype.name,n)}else t.error("Method "+i+" does not exist on jQuery."+o.name)})}}(jQuery),function(t){var o=function(){};t.extend(o.prototype,{name:"GoogleMapsProPreview",initialize:function(o,e){this.options=t.extend({language:"en",mapType:"roadmap",http:"http"},e);var i=this;0==i.options.mapType?MapType="roadmap":1==i.options.mapType?MapType="satellite":2==i.options.mapType?MapType="hybrid":3==i.options.mapType&&(MapType="terrain"),t("<span>").addClass("input-cancel").insertAfter(o).click(function(){o.val(""),o.change()}),o.change(function(){var t=o.attr("data-decimal-coordinates");t?o.siblings(".map-preview").show().find("img").attr("src",i.options.http+"://maps.google.com/maps/api/staticmap?zoom=14&size=411x160&maptype="+MapType+"&sensor=false&markers="+t+"&language="+i.options.language):o.siblings(".map-preview").hide().find("img").attr("src","")})}}),t.fn[o.prototype.name]=function(){var e=arguments,i=e[0]?e[0]:null;return this.each(function(){var s=t(this);if(o.prototype[i]&&s.data(o.prototype.name)&&"initialize"!=i)s.data(o.prototype.name)[i].apply(s.data(o.prototype.name),Array.prototype.slice.call(e,1));else if(!i||t.isPlainObject(i)){var n=new o;o.prototype.initialize&&n.initialize.apply(n,t.merge([s],e)),s.data(o.prototype.name,n)}else t.error("Method "+i+" does not exist on jQuery."+o.name)})}}(jQuery);